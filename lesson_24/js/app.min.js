(()=>{"use strict";let e=(e,t=500,n=0)=>{e.classList.contains("_slide")||(e.classList.add("_slide"),e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=`${e.offsetHeight}px`,e.offsetHeight,e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,window.setTimeout((()=>{e.hidden=!n,!n&&e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),!n&&e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideUpDone",{detail:{target:e}}))}),t))},t=(e,t=500,n=0)=>{if(!e.classList.contains("_slide")){e.classList.add("_slide"),e.hidden=!e.hidden&&null,n&&e.style.removeProperty("height");let i=e.offsetHeight;e.style.overflow="hidden",e.style.height=n?`${n}px`:"0px",e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.offsetHeight,e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=t+"ms",e.style.height=i+"px",e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property"),e.classList.remove("_slide"),document.dispatchEvent(new CustomEvent("slideDownDone",{detail:{target:e}}))}),t)}};function n(e,t){const n=Array.from(e).filter((function(e,n,i){if(e.dataset[t])return e.dataset[t].split(",")[0]}));if(n.length){const e=[];n.forEach((n=>{const i={},s=n.dataset[t].split(",");i.value=s[0],i.type=s[1]?s[1].trim():"max",i.item=n,e.push(i)}));let i=e.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));i=function(e){return e.filter((function(e,t,n){return n.indexOf(e)===t}))}(i);const s=[];if(i.length)return i.forEach((t=>{const n=t.split(","),i=n[1],r=n[2],o=window.matchMedia(n[0]),l=e.filter((function(e){if(e.value===i&&e.type===r)return!0}));s.push({itemsArray:l,matchMedia:o})})),s}}let i=!1;setTimeout((()=>{if(i){let e=new Event("windowScroll");window.addEventListener("scroll",(function(t){document.dispatchEvent(e)}))}}),0);let s=document.querySelectorAll(".card__title"),r=document.querySelectorAll(".card__views span"),o=document.querySelectorAll(".card"),l=document.querySelector(".menu-filter__counter-showing-items"),a=document.querySelector(".menu-filter__whole-items-count"),c=document.querySelectorAll(".menu-filter__three-group img"),d=document.querySelectorAll(".vigets-filter__item"),u=document.querySelectorAll(".vigets-filter__clear"),g=document.querySelectorAll(".vigets-filter__counter span"),m=document.querySelector(".vigets-filter__button");if(d&&m.addEventListener("click",(function(e){for(let e of d)e.style.display="none"})),o)for(let e of g)console.log(o.length),e.innerHTML=o.length;if(d)for(let e=0;e!=u.length;e++)u[e].addEventListener("click",(function(t){u[e].closest(".vigets-filter__item")&&(u[e].closest(".vigets-filter__item").style.display="none"),t.preventDefault()}));if(c)for(let e of c)e.addEventListener("click",(function(t){e.classList.toggle("_active"),e.classList.contains("_active")&&"img/three-group-active.svg"==e.getAttribute("src")?(console.log(e.getAttribute("src")),e.setAttribute("src","img/three-group.svg")):e.classList.contains("_active")||"img/three-group.svg"!=e.getAttribute("src")?e.classList.contains("_active")||"img/three-line-group.svg"!=e.getAttribute("src")?e.classList.contains("_active")&&"img/three-line-group-active.svg"==e.getAttribute("src")&&e.setAttribute("src","img/three-line-group.svg"):e.setAttribute("src","img/three-line-group-active.svg"):e.setAttribute("src","img/three-group-active.svg"),t.preventDefault()}));if(o&&(l.innerHTML=`1 - ${o.length}`,a.innerHTML=o.length),o)for(let e=0;e!=o.length;e++)o[e].addEventListener("click",(function(t){r[e].innerHTML=Number(r[e].textContent)+1,t.preventDefault()}));for(let e of s)e.textContent.length>=60&&(e.innerHTML=`${e.textContent.slice(0,60)}...`);if(o)if(self.screen.width<991.98)for(let e of o)e.classList.remove("card_hovered");else for(let e of o)e.classList.add("card_hovered");window.FLS=!0,function(e){let t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}((function(e){let t=!0===e?"webp":"no-webp";document.documentElement.classList.add(t)})),function(){const i=document.querySelectorAll("[data-spollers]");if(i.length>0){const s=Array.from(i).filter((function(e,t,n){return!e.dataset.spollers.split(",")[0]}));s.length&&o(s);let r=n(i,"spollers");function o(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_spoller-init"),l(e),e.addEventListener("click",a)):(e.classList.remove("_spoller-init"),l(e,!1),e.removeEventListener("click",a))}))}function l(e,t=!0){let n=e.querySelectorAll("[data-spoller]");n.length&&(n=Array.from(n).filter((t=>t.closest("[data-spollers]")===e)),n.forEach((e=>{t?(e.removeAttribute("tabindex"),e.classList.contains("_spoller-active")||(e.nextElementSibling.hidden=!0)):(e.setAttribute("tabindex","-1"),e.nextElementSibling.hidden=!1)})))}function a(n){const i=n.target;if(i.closest("[data-spoller]")){const s=i.closest("[data-spoller]"),r=s.closest("[data-spollers]"),o=r.hasAttribute("data-one-spoller"),l=r.dataset.spollersSpeed?parseInt(r.dataset.spollersSpeed):500;r.querySelectorAll("._slide").length||(o&&!s.classList.contains("_spoller-active")&&c(r),s.classList.toggle("_spoller-active"),((n,i=500)=>{n.hidden?t(n,i):e(n,i)})(s.nextElementSibling,l)),n.preventDefault()}}function c(t){const n=t.querySelector("[data-spoller]._spoller-active"),i=t.dataset.spollersSpeed?parseInt(t.dataset.spollersSpeed):500;n&&!t.querySelectorAll("._slide").length&&(n.classList.remove("_spoller-active"),e(n.nextElementSibling,i))}r&&r.length&&r.forEach((e=>{e.matchMedia.addEventListener("change",(function(){o(e.itemsArray,e.matchMedia)})),o(e.itemsArray,e.matchMedia)}));const d=document.querySelectorAll("[data-spoller-close]");d.length&&document.addEventListener("click",(function(t){t.target.closest("[data-spollers]")||d.forEach((t=>{const n=t.closest("[data-spollers]"),i=n.dataset.spollersSpeed?parseInt(n.dataset.spollersSpeed):500;t.classList.remove("_spoller-active"),e(t.nextElementSibling,i)}))}))}}(),function(){const e=document.querySelectorAll(".rating");e.length>0&&function(){let t,n;for(let t=0;t<e.length;t++){i(e[t])}function i(e){s(e),r(),e.classList.contains("rating_set")&&o(e)}function s(e){t=e.querySelector(".rating__active"),n=e.querySelector(".rating__value")}function r(e=n.innerHTML){const i=e/.05;t.style.width=`${i}%`}function o(e){const t=e.querySelectorAll(".rating__item");for(let i=0;i<t.length;i++){const o=t[i];o.addEventListener("mouseenter",(function(t){s(e),r(o.value)})),o.addEventListener("mouseleave",(function(e){r()})),o.addEventListener("click",(function(t){s(e),e.dataset.ajax?l(o.value,e):(n.innerHTML=i+1,r())}))}}async function l(e,t){if(!t.classList.contains("rating_sending")){t.classList.add("rating_sending");let e=await fetch("rating.json",{method:"GET"});if(e.ok){const i=(await e.json()).newRating;n.innerHTML=i,r(),t.classList.remove("rating_sending")}else alert("Ошибка"),t.classList.remove("rating_sending")}}}()}()})();